<!doctype html>
<html lang="tr">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Aile HekimliÄŸi Paneli</title>
<meta name="theme-color" content="#0b1f16">

<style>
:root{
  --bg:#0b1f16;
  --card:#153424;
  --accent:#4caf50;
  --text:#f4fff6;
  --muted:#a7c9b0;
}
body{
  margin:0;
  font-family:-apple-system,system-ui;
  background:#0b1f16;
  color:var(--text);
  padding:16px;
}
h1{margin:0 0 8px 0;color:#a5d6a7}
.panel{
  background:#10271c;
  border-radius:14px;
  padding:14px;
  margin-bottom:14px;
}
input,select,textarea,button{
  width:100%;
  margin:6px 0;
  padding:10px;
  border-radius:10px;
  border:none;
  font-size:14px;
}
button{
  background:var(--accent);
  color:#fff;
  font-weight:600;
}
.card{
  background:var(--card);
  border-radius:12px;
  padding:10px;
  margin-top:10px;
}
.small{font-size:12px;color:var(--muted)}
</style>

<!-- ðŸ”¥ Firebase -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
import { getFirestore, collection, addDoc, getDocs, query, orderBy } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyDhRWEiA-rrpuazR_YnV7UmhQ-UiDeAHUU",
  authDomain: "aile-hekimligi-paneli.firebaseapp.com",
  projectId: "aile-hekimligi-paneli",
  storageBucket: "aile-hekimligi-paneli.firebasestorage.app",
  messagingSenderId: "661070000720",
  appId: "1:661070000720:web:7e657b58ba337f3ef55755"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);
window.db = db;

window.ekle = async function(){
  const ad = adInput.value.trim();
  const tc = tcInput.value.trim();
  const kategori = kategoriSelect.value;
  const hyp = hypInput.value;

  if(!ad || !tc || !kategori){
    alert("Ad, TC ve kategori zorunlu");
    return;
  }

  await addDoc(collection(db,"patients"),{
    ad, tc, kategori, hyp,
    createdAt:new Date()
  });

  adInput.value="";
  tcInput.value="";
  hypInput.value="";
  listele();
}

window.listele = async function(){
  list.innerHTML="YÃ¼kleniyor...";
  const q = query(collection(db,"patients"),orderBy("createdAt","desc"));
  const snap = await getDocs(q);

  if(snap.empty){
    list.innerHTML="KayÄ±t yok";
    return;
  }

  list.innerHTML="";
  snap.forEach(d=>{
    const r=d.data();
    const div=document.createElement("div");
    div.className="card";
    div.innerHTML=`
      <b>${r.ad}</b><br>
      TC: ${r.tc}<br>
      ${r.kategori}${r.hyp ? " â€“ HYP: "+r.hyp : ""}
    `;
    list.appendChild(div);
  });
}

window.onload=listele;
</script>
</head>

<body>
<h1>ðŸŒ² Aile HekimliÄŸi Paneli</h1>

<div class="panel">
  <input id="adInput" placeholder="Ad Soyad">
  <input id="tcInput" placeholder="TC">
  <select id="kategoriSelect">
    <option value="">Kategori</option>
    <option>Hipertansiyon</option>
    <option>DM</option>
    <option>KVR</option>
    <option>Obezite</option>
    <option>YaÅŸlÄ± Ä°zlem</option>
    <option>KAH Ä°zlem</option>
    <option>Ä°nme Ä°zlem</option>
    <option>KBH Ä°zlem</option>
    <option>KOAH Ä°zlem</option>
    <option>AstÄ±m Ä°zlem</option>
  </select>
  <input id="hypInput" placeholder="HYP Tarihi (opsiyonel)">
  <button onclick="ekle()">Kaydet</button>
</div>

<div class="panel">
  <div class="small">KayÄ±tlar</div>
  <div id="list"></div>
</div>

</body>
</html>
